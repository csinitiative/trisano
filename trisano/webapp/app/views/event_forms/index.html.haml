-# Copyright (C) 2007, 2008, 2009 The Collaborative Software Foundation
-#
-# This file is part of TriSano.
-#
-# TriSano is free software: you can redistribute it and/or modify it under the terms of the
-# GNU Affero General Public License as published by the Free Software Foundation, either 
-# version 3 of the License, or (at your option) any later version.
-#
-# TriSano is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; 
-# without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  
-# See the GNU Affero General Public License for more details.
-# 
-# You should have received a copy of the GNU Affero General Public License along with TriSano. 
-# If not, see http://www.gnu.org/licenses/agpl-3.0.txt.

- content_for :title do
  Event Forms

- content_for :name do
  = render(:partial => 'events/basic_event_info', :locals => { :event => @event })

#forms_in_use
  #rot
    %h2="Forms in use"
    %table.list
      %tr
        %th.forminformation
          Form Information
        %th Diseases
        %th Jurisdiction
        %th Event Type
      - for form in @forms_in_use
        %tr.roll
          %td.forminformation
            .formname
              = form.name
              %br
            .description
              = h form.description
          %td
            %ul
              - form.diseases.each do |disease|
                %li.diseaselist
                  = h disease.disease_name
          %td
            = h form.jurisdiction.nil? ? "All" : form.jurisdiction.current_place.name
          %td
            = h form.event_type.humanize

#forms_available
  #rot
    %br
    %hr{:style => 'color: #090; background-color: #090; height: 2px'}
    %h2="Forms available for use"
    - if @forms_available.size > 0
      - form_for(:event_form) do |f|
        %table.list
          %tr
            %th.forminformation
              Form Information
            %th Diseases
            %th Jurisdiction
            %th Event Type
            %th Add to Event
            - for form in @forms_available
              %tr.roll
                %td.forminformation
                  .formname
                    = form.name
                    %br
                  .description
                    = h form.description
                %td
                  %ul
                    - form.diseases.each do |disease|
                      %li.diseaselist
                        = h disease.disease_name
                %td
                  = h form.jurisdiction.nil? ? "All" : form.jurisdiction.current_place.name
                %td
                  = h form.event_type.humanize
                %td
                  = check_box_tag("forms_to_add[]", form.id)

        %br
        = submit_tag("Add Forms")
    - else
      %em All forms in use
