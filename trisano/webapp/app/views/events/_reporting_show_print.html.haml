-# Copyright (C) 2007, 2008, The Collaborative Software Foundation
-#
-# This file is part of TriSano.
-#
-# TriSano is free software: you can redistribute it and/or modify it under the terms of the
-# GNU Affero General Public License as published by the Free Software Foundation, either 
-# version 3 of the License, or (at your option) any later version.
-#
-# TriSano is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; 
-# without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  
-# See the GNU Affero General Public License for more details.
-# 
-# You should have received a copy of the GNU Affero General Public License along with TriSano. 
-# If not, see http://www.gnu.org/licenses/agpl-3.0.txt.

%span.section-header Reporting Information
%br

- reporter_entity = @event.reporter.nil? ? nil : @event.reporter.secondary_entity
- reporter_person = reporter_entity.person if reporter_entity
- reporter_phone = (reporter_entity && !reporter_entity.telephone_entities_locations.empty?) ? reporter_entity.telephone_entities_locations.last.location.telephones.last : nil

#reporter
  .three-valued-row
    .long
      %span.print-label
        Name of reporter:
      %span.print-value
        = reporter_person.first_name unless reporter_entity.nil?
        = reporter_person.last_name unless reporter_entity.nil?
    .long
      %span.print-label
        Reporting agency:
      %span.print-value
        = @event.reporting_agency.secondary_entity.place.name unless @event.reporting_agency.nil?

  .three-valued-row
    %hr
    .double
      %span.print-label
        Reporter phone number:
      %span.print-value
        - unless reporter_phone.nil?
          - if not reporter_phone.nil?
            = fml " (", reporter_phone.area_code, ") " if reporter_phone.area_code
            = phone_number(reporter_phone.phone_number)
            = fml " Ext. ", reporter_phone.extension, "" if reporter_phone.extension

  .three-valued-row
    %hr
    .long
      %span.print-label
        Results reported to Clinician:
      %span.print-value
        = @event.results_reported_to_clinician_date 
    .long
      %span.print-label
        First reported to public health:
      %span.print-value
        = @event.first_reported_PH_date
  .three-valued-row
    %hr
