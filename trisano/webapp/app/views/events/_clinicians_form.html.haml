-# Copyright (C) 2007, 2008, The Collaborative Software Foundation
-#
-# This file is part of TriSano.
-#
-# TriSano is free software: you can redistribute it and/or modify it under the terms of the
-# GNU Affero General Public License as published by the Free Software Foundation, either 
-# version 3 of the License, or (at your option) any later version.
-#
-# TriSano is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; 
-# without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  
-# See the GNU Affero General Public License for more details.
-# 
-# You should have received a copy of the GNU Affero General Public License along with TriSano. 
-# If not, see http://www.gnu.org/licenses/agpl-3.0.txt.

%div{:id => "clinicians"}
  %span{:class => 'vert'}
    = auto_complete_stylesheet
    %label{:for => 'clinicians_search'} Search for an existing clinician
    = text_field_tag('clinicians_search')
    = image_tag('redbox_spinner.gif', :size => '16x16', :alt => 'Searching...', :id=>'clinicians_search_spinner', :style=>'display: none;')
    .auto_complete{:id => 'clinicians_search_choices'}
    = auto_complete_field('clinicians_search', {:select => 'last_name', :param_name=>'last_name', :update => 'clinicians_search_choices', :indicator => 'clinicians_search_spinner', :method => 'get', :url => {:action => 'auto_complete_for_clinicians_search'}, :after_update_element => clinician_select_callback(:update => 'existing_clinicians', :url => {:action => :clinicians_selection})})
  #existing_clinicians
    = render :partial => "events/clinician_show", :collection => @event.clinicians.collect {|c| c.secondary_entity.person_temp} 

%p{:style => "clear: both;"}= add_clinician_link "Add a clinician"

