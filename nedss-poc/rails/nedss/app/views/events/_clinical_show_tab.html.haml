%fieldset
  %legend Clinical Information

  %table{:cellpadding => '2'}
    %tr
      %td
        %span{:class => 'label'}
          Disease:
      %td
        = @event.disease.disease.disease_name unless @event.disease.nil? || @event.disease.disease.nil?
    %tr
      %td
        %span{:class => 'label'}
          Disease onset date:
      %td
        = @event.disease.disease_onset_date unless @event.disease.nil? || @event.disease.disease.nil?
      %td
        %span{:class => 'label'}
          Date diagnosed:
      %td
        = @event.disease.date_diagnosed unless @event.disease.nil? || @event.disease.disease.nil?
    %tr
      %td
        %span{:class => 'label'}
          Hospitalized:
      %td
        = l @event.disease.hospitalized unless @event.disease.nil?
      %td
        &nbsp;
      %td
        &nbsp;
    %tr
      %td
        %span{:class => 'label'}
          Died:
      %td
        = l @event.disease.died unless @event.disease.nil?
      %td
        %span{:class => 'label'}
          Date of death:
      %td
        = entity_data.person.date_of_death
    %tr
      %td
        %span{:class => "label"}
          Pregnant
      %td
        = l @event.active_patient.participations_risk_factor.pregnant unless @event.active_patient.nil? or @event.active_patient.participations_risk_factor.nil?
      %td
        %span{:class => "label"}
          Pregnancy due date:
      %td
        = @event.active_patient.participations_risk_factor.pregnancy_due_date unless @event.active_patient.nil? or @event.active_patient.participations_risk_factor.nil?
    %tr
      %td
        %span{:class => 'label'}
          Imported from:
      %td
        = l @event.imported_from
      %td
        &nbsp;
      %td
        &nbsp;

  %fieldset
    %legend
      Diagnosing health facilities  
    - if @event.diagnosing_health_facilities.empty?
      %h3 No diganosing health facilities have been recorded for this event
    - else
      %table{:class => 'tabular'}
        %tr
          %th Diagnosing health facility

        - for diagnostic in @event.diagnosing_health_facilities
          %tr
            %td= diagnostic.secondary_entity.place_temp.name

  %fieldset
    %legend
      Hospitalized health facilities  
    - if @event.hospitalized_health_facilities.empty?
      %h3 No hospitalized health facilities have been recorded for this event
    - else
      %table{:class => 'tabular'}
        %tr
          %th Hospitalized health facility
          %th Admission date
          %th Discharge date
          %th Medical Record Number

        - for hospital in @event.hospitalized_health_facilities
          %tr
            %td= hospital.secondary_entity.place_temp.name
            - if hospital.hospitals_participation.nil?
              %td
              %td
              %td
            - else
              %td= hospital.hospitals_participation.admission_date
              %td= hospital.hospitals_participation.discharge_date
              %td= hospital.hospitals_participation.medical_record_number


  %fieldset
    %legend
      Treatments  
    %table{:cellpadding => '2'}
      %tr
        %td
          %div{:id => 'treatment-list'}
            = render :partial => 'treatments/index'

  %fieldset
    %legend
      Clinicians  
    %table{:cellpadding => '2'}
      %tr
        %td
          %div{:id => 'clinicians-list'}
            = render :partial => 'clinicians/index'


