
%table{:width => '100%', :cellpadding => '5', :cellspacing => '0'}
  %tr
    %td{:width => '40%', :align => 'left', :valign => 'top'}
      %h3
        Element Library
      %div{:id => "builder-library"}

        %label
          Filter Library
          = text_field_tag :lib_filter
      
        = observe_field(:lib_filter, :frequency => 0.5, :update => "library-element-list", :url => { :controller => 'form_elements', :action => 'filter_elements' }, :with => "'filter_by='+encodeURIComponent(value)")

        %ul{:id => "library-element-list"}
          = render :partial => 'forms/library_elements'

      = drop_receiving_element("library-element-list", :update => "library-element-list", :accept => 'question-item', :hoverclass => 'library-drop-active', :complete => visual_effect(:highlight, 'library-element-list'), :url => {:action => 'to_library'})
    %td{:width => '40%', :valign=>'top', :nowrap => ''}
      %h3
        Form Hierarchy
      %div{:id => "builder-info"}

      %small
        = link_to_remote("Add a core tab configuration", :url => {:controller => "core_view_elements", :action => "new", :form_id => @form.id}, :method => :get)
        &nbsp;|&nbsp;
        = link_to_remote("Add a tab", :url => {:controller => "view_elements", :action => "new", :form_id => @form.id}, :method => :get)

      %ul{:id => "root-element-list"}
        = render :partial => 'forms/elements'

      /= sortable_element("root-element-list",    :containment => ["root-element-list", "library-element-list"], :constraint => false, :ghosting => true, :revert => true, :dropOnEmpty => true, :url => { :controller => 'form_elements', :action => 'to_library'})
      = button_to "Publish", {:action => "publish", :id => @form.id}

    %td{:width => '20%', :align => 'left', :valign => 'top'}
      %div{:id => "builder-mods"}

= link_to "Back to form edit", edit_form_path(@form)
