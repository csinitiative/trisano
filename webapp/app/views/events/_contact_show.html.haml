-# Copyright (C) 2007, 2008, 2009 The Collaborative Software Foundation
-#
-# This file is part of TriSano.
-#
-# TriSano is free software: you can redistribute it and/or modify it under the
-# terms of the GNU Affero General Public License as published by the
-# Free Software Foundation, either version 3 of the License,
-# or (at your option) any later version.
-#
-# TriSano is distributed in the hope that it will be useful, but
-# WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU Affero General Public License for more details.
-#
-# You should have received a copy of the GNU Affero General Public License
-# along with TriSano. If not, see http://www.gnu.org/licenses/agpl-3.0.txt.

- f.fields_for(:interested_party, :builder => ExtendedFormBuilder) do |ip|
  = ip.hidden_field(:primary_entity_id)

  - contact_entity = ip.object.person_entity
  - person = contact_entity.person
  - contact_phone = contact_entity.primary_phone

  %span.horiz{:style => "clear: both;"}
    = label_tag "Name"
    = person.last_comma_first
  %span.horiz
    = label_tag "Phone"
    -unless contact_phone.nil? 
      %span.horiz= contact_phone.simple_format

- f.fields_for(:participations_contact, :builder => ExtendedFormBuilder) do |pc_fields|
  %span.horiz
    = pc_fields.label(:disposition_id)
    = pc_fields.dropdown_code_field(:disposition_id, 'contactdispositiontype')
  %span.horiz
    = pc_fields.label(:contact_type_id)
    = pc_fields.dropdown_code_field(:contact_type_id, 'contact_type')
  %span.horiz
  - unless f.object.new_record?
    %span.horiz
      = f.label :_delete, "Remove"
      = f.check_box :_delete

  = f.label('&nbsp;')
  = link_to("Edit contact event", edit_contact_event_path(f.object), {:id => "edit-contact-event"}) unless f.object.new_record?

%br
